# ðŸ”— URL Shortener API

ÐŸÑ€Ð¾ÑÑ‚Ð¾Ðµ Ð¸ ÑƒÐ´Ð¾Ð±Ð½Ð¾Ðµ API Ð´Ð»Ñ ÑÐ¾ÐºÑ€Ð°Ñ‰ÐµÐ½Ð¸Ñ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ñ… URL-Ð°Ð´Ñ€ÐµÑÐ¾Ð² Ñ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸ÐµÐ¹ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ Ð¸ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¾Ð¹ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð².


## ðŸš€ Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ñ… ÑÑÑ‹Ð»Ð¾Ðº
- ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ðµ Ð°Ð»Ð¸Ð°ÑÑ‹ Ð´Ð»Ñ ÑÑÑ‹Ð»Ð¾Ðº
- ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ ÑÑ€Ð¾ÐºÐ° Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ ÑÑÑ‹Ð»Ð¾Ðº
- Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð²
- ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾Ñ‡Ð¸ÑÑ‚ÐºÐ° Ð½ÐµÐ¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼Ñ‹Ñ… ÑÑÑ‹Ð»Ð¾Ðº Ð¿Ð¾ Ð¸ÑÑ‚ÐµÑ‡ÐµÐ½Ð¸Ð¸ 5 Ð´Ð½ÐµÐ¹

## ðŸ“š Ð”Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ API

### ðŸ” ÐÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ

| ÐœÐµÑ‚Ð¾Ð´ | Ð­Ð½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚     | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                          | Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ |
|-------|--------------|-----------------------------------|--------------------------|
| POST  | `/register`  | Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð½Ð¾Ð²Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ   | ÐÐµÑ‚                      |
| POST  | `/login`     | Ð’Ñ…Ð¾Ð´ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ                    | ÐÐµÑ‚                      |
| POST  | `/logout`    | Ð’Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹                  | Ð”Ð°                       |
| GET   | `/me`        | Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ¼ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ | Ð”Ð°                       |

### ðŸ”— Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ ÑÑÑ‹Ð»ÐºÐ°Ð¼Ð¸

| ÐœÐµÑ‚Ð¾Ð´ | Ð­Ð½Ð´Ð¿Ð¾Ð¸Ð½Ñ‚                  | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                          | Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ÑÑ Ð°ÑƒÑ‚ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ |
|-------|---------------------------|-----------------------------------|--------------------------|
| POST  | `/links/shorten`          | Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ð¹ ÑÑÑ‹Ð»ÐºÐ¸          | ÐžÐ¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾              |
| GET   | `/{short_code}`           | ÐŸÐµÑ€ÐµÐ½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ð¹ ÑÑÑ‹Ð»ÐºÐµ| ÐÐµÑ‚                      |
| GET   | `/links/search`           | ÐŸÐ¾Ð¸ÑÐº ÑÑÑ‹Ð»Ð¾Ðº Ð¿Ð¾ Ð¾Ñ€Ð¸Ð³Ð¸Ð½Ð°Ð»ÑŒÐ½Ð¾Ð¼Ñƒ URL | ÐÐµÑ‚                      |
| GET   | `/links/{short_code}/stats`| Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐµ              | ÐÐµÑ‚                      |
| DELETE| `/links/{short_code}`     | Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ ÑÑÑ‹Ð»ÐºÐ¸                   | Ð”Ð° (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ)    |
| PUT   | `/links/{short_code}`     | ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ ÑÑÑ‹Ð»ÐºÐ¸                 | Ð”Ð° (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ)    |
| GET   | `/links/expired`          | Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¸ÑÑ‚ÐµÐºÑˆÐ¸Ñ… ÑÑÑ‹Ð»Ð¾Ðº            | ÐÐµÑ‚                      |

## ðŸ’¡ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

### Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
```bash
curl -X POST "http://localhost:8000/register" \
  -H "Content-Type: application/json" \
  -d '{"email": "user@example.com", "password": "password123"}'
```

### Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¸Ðµ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ð¹ ÑÑÑ‹Ð»ÐºÐ¸
```bash
curl -X POST "http://localhost:8000/links/shorten" \
  -H "Content-Type: application/json" \
  -d '{
    "original_url": "https://example.com/long/url/path",
    "custom_alias": "my-link",
    "expires_at": "2023-12-31T23:59:59"
  }'
```

### ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ ÑÑ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ¸ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ ÑÑÑ‹Ð»ÐºÐ¸
```bash
curl "http://localhost:8000/links/my-link/stats"
```

## ðŸ›  Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Ð¸ Ð·Ð°Ð¿ÑƒÑÐº
```bash
Copy
# 1. ÐšÐ»Ð¾Ð½Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¹
git clone [https://github.com/yourusername/url-shortener.git](https://github.com/yanaverina/FastAPI_project.git)
cd url-shortener

# 2. Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ñ„Ð°Ð¹Ð» .env
cat > .env <<EOL
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=urlshortener
REDIS_URL=redis://redis:6379
EOL

# 3. Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚Ðµ ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ñ‡ÐµÑ€ÐµÐ· Docker Compose
docker-compose up -d --build

# 4. ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ API
curl http://localhost:8000
```

ÐŸÐ¾ÑÐ»Ðµ Ð·Ð°Ð¿ÑƒÑÐºÐ° API Ð±ÑƒÐ´ÐµÑ‚ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾ Ð¿Ð¾ Ð°Ð´Ñ€ÐµÑÑƒ:
ðŸŒ http://localhost:8000

# ðŸ—ƒ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ…

## ðŸ“Œ Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° `users`

| Ð¡Ñ‚Ð¾Ð»Ð±ÐµÑ†         | Ð¢Ð¸Ð¿ Ð´Ð°Ð½Ð½Ñ‹Ñ…       | ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ               | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                |
|-----------------|------------------|---------------------------|-------------------------|
| `id`            | `SERIAL`         | `PRIMARY KEY`             | Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€|
| `email`         | `TEXT`           | `UNIQUE NOT NULL`         | Email Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ      |
| `password_hash` | `TEXT`           | `NOT NULL`                | Ð¥ÐµÑˆ Ð¿Ð°Ñ€Ð¾Ð»Ñ (bcrypt)     |
| `created_at`    | `TIMESTAMP`      | `DEFAULT CURRENT_TIMESTAMP`| Ð”Ð°Ñ‚Ð° Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸        |

## ðŸ“Œ Ð¢Ð°Ð±Ð»Ð¸Ñ†Ð° `links`

| Ð¡Ñ‚Ð¾Ð»Ð±ÐµÑ†         | Ð¢Ð¸Ð¿ Ð´Ð°Ð½Ð½Ñ‹Ñ…       | ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ               | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                     |
|-----------------|------------------|---------------------------|------------------------------|
| `id`            | `SERIAL`         | `PRIMARY KEY`             | Ð£Ð½Ð¸ÐºÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ‚Ð¾Ñ€     |
| `original_url`  | `TEXT`           | `NOT NULL`                | ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ URL Ð´Ð»Ñ ÑÐ¾ÐºÑ€Ð°Ñ‰ÐµÐ½Ð¸Ñ    |
| `short_code`    | `TEXT`           | `UNIQUE NOT NULL`         | Ð“ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÐ¼Ñ‹Ð¹ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¸Ð¹ ÐºÐ¾Ð´ (6 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²)|
| `custom_alias`  | `TEXT`           | `NULL`                    | ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒÑÐºÐ¸Ð¹ Ð°Ð»Ð¸Ð°Ñ (ÐµÑÐ»Ð¸ ÑƒÐºÐ°Ð·Ð°Ð½)|
| `expires_at`    | `TIMESTAMP`      | `NULL`                    | Ð”Ð°Ñ‚Ð° Ð¸ÑÑ‚ÐµÑ‡ÐµÐ½Ð¸Ñ ÑÑ€Ð¾ÐºÐ° Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ|
| `created_at`    | `TIMESTAMP`      | `DEFAULT CURRENT_TIMESTAMP`| Ð”Ð°Ñ‚Ð° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ ÑÑÑ‹Ð»ÐºÐ¸         |
| `clicks`        | `INTEGER`        | `DEFAULT 0`               | Ð¡Ñ‡ÐµÑ‚Ñ‡Ð¸Ðº Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¾Ð²           |
| `user_id`       | `INTEGER`        | `REFERENCES users(id) ON DELETE SET NULL`| Ð¡Ð²ÑÐ·ÑŒ Ñ Ð²Ð»Ð°Ð´ÐµÐ»ÑŒÑ†ÐµÐ¼ ÑÑÑ‹Ð»ÐºÐ¸|

## ðŸ” ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¾Ð±Ñ€Ð°Ð·Ð°
![Screenshot from 2025-03-29 16-48-06](https://github.com/user-attachments/assets/5889bcb8-4623-4d69-a2ed-76b31a77f8bc)

